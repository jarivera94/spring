<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<p:tab id="tabLoteVentaSinConstruccion"
		title="Comparación de mercado Lote en venta sin construcción"
		rendered="#{informeHipotecarioBean.mostrarMetodoComparacionMercadoLoteVentaSinContruccion}">

		<p:commandButton icon="ui-icon-plusthick" value="Nueva Oferta"
			update="ofertasLSCV"
			actionListener="#{comparacionMercadoLoteVentaBean.adicionarOferta}"
			global="true">
		</p:commandButton>

		<p:commandButton value="Calcular Metodologia"
			actionListener="#{comparacionMercadoLoteVentaBean.calcular}"
			icon="ui-icon-gear" styleClass="button_green" global="true">
		</p:commandButton>

		<h:panelGroup id="ofertasLSCV">
			<p:panelGrid style="width:80%" styleClass="ui-panelgrid-methodology">

				<p:row
					style="border-bottom: 1px solid #00aad8 !important; background-color:#F2F5FA !important;">
					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Localización" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Fuente" />
					</p:column>
					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Comparación" />
					</p:column>
					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Ubicacion" />
					</p:column>
					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Área Lote" />
					</p:column>
					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Forma" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Ubi" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Forma" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Topog" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Neg" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Sup" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="F.H" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Precio Unitario m2" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Valor m2 Ajustado" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="Valor Comercial" />
					</p:column>

					<p:column
						styleClass="ui-widget-header ui-column-header-grid-methodology">
						<h:outputText value="" />
					</p:column>


				</p:row>

				<ui:repeat
					value="#{comparacionMercadoLoteVentaBean.metodoValuacion.ofertasLoteSinConstruccion}"
					var="oferta">

					<p:row style="border-bottom: 1px solid #00aad8 !important;">
						<p:column styleClass="ui-widget-header">
							<p:inputText value="#{oferta.localizacion}"
								styleClass="ui-inputfield-methodology-editable"
								style="width:150px;" />
						</p:column>

						<p:column styleClass="ui-widget-header" width="">
							<p:inputText id="txtFuenteMetodologiaLSCV" maxlength="1000"
								value="#{oferta.fuente}"
								styleClass="ui-inputfield-methodology-editable"
								style="width:150px;" />
						</p:column>

						<p:column styleClass="ui-widget-header">

							<h:selectOneMenu id="cmbComparacionMetodologiaLSCV"
								style="width:120px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.comparacion}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.metodoValuacion.tiposComparacion}"
									var="var" itemValue="#{var}" itemLabel="#{var.value}" />
							</h:selectOneMenu>

						</p:column>
						<p:column styleClass="ui-widget-header">

							<h:selectOneMenu id="cmbUbiaccionMetodologiaLSCV"
								style="width:100px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.ubicacionLote}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.metodoValuacion.tiposUbicacion}"
									var="var" itemValue="#{var}" itemLabel="#{var.value}" />
							</h:selectOneMenu>

						</p:column>
						<p:column styleClass="ui-widget-header">
							<p:inputNumber decimalSeparator="," thousandSeparator="."
								decimalPlaces="2" id="txtAreaLoteMetodologiaLSCV" maxlength="20"
								value="#{oferta.areaLoteM2}"
								styleClass="ui-inputfield-methodology-editable-short" />
						</p:column>
						<p:column styleClass="ui-widget-header">

							<h:selectOneMenu id="cmbFormaMetodologiaLSCV" style="width:100px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.forma}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.metodoValuacion.tiposForma}"
									var="var" itemValue="#{var}" itemLabel="#{var.value}" />
							</h:selectOneMenu>

						</p:column>
						<p:column styleClass="ui-widget-header">

							<h:selectOneMenu id="cmbUbiaccion2MetodologiaLSCV"
								style="width:50px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.factorHomologacionUbicacion}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.metodoValuacion.factoresHomologacion}"
									var="var" itemValue="#{var}" itemLabel="#{var.value}" />
							</h:selectOneMenu>

						</p:column>

						<p:column styleClass="ui-widget-header">

							<h:selectOneMenu id="cmbFactorHomologacionFormaMetodologiaLSCV"
								style="width:50px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.factorHomologacionForma}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.metodoValuacion.factoresHomologacion}"
									var="var" itemValue="#{var}" itemLabel="#{var.value}" />
							</h:selectOneMenu>


						</p:column>

						<p:column styleClass="ui-widget-header">


							<h:selectOneMenu
								id="cmbFactorHomologacionTipografiaMetodologiaLSCV"
								style="width:50px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.factorHomologacionTipografia}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.metodoValuacion.factoresHomologacion}"
									var="var" itemValue="#{var}" itemLabel="#{var.value}" />
							</h:selectOneMenu>

						</p:column>

						<p:column styleClass="ui-widget-header">

							<h:selectOneMenu id="cmbNegociacionMetodologiaLSCV"
								style="width:50px"
								styleClass="ui-select-item-methodology-editable"
								value="#{oferta.negociacion}">
								<f:selectItems
									value="#{comparacionMercadoLoteVentaBean.factoresNegociacion}"
									var="var" itemValue="#{var}" itemLabel="#{var}" />
							</h:selectOneMenu>
						</p:column>

						<p:column styleClass="ui-widget-header">
							<p:inputNumber decimalSeparator="," thousandSeparator="."
								decimalPlaces="2" id="txtSuperficieMetodologiaLSCV"
								maxlength="20" value="#{oferta.factorHomologacionSuperficie}"
								disabled="true"
								styleClass="ui-inputfield-methodology-disabled-short"
								style="width:70px;" />

						</p:column>

						<p:column styleClass="ui-widget-header">
							<p:inputNumber decimalSeparator="," thousandSeparator="."
								decimalPlaces="2" id="txtFactorHomogenizacionMetodologiaLSCV"
								maxlength="20" value="#{oferta.factorHomogenizacion}"
								disabled="true"
								styleClass="ui-inputfield-methodology-disabled-short" />
						</p:column>

						<p:column styleClass="ui-widget-header">
							<p:inputNumber symbol="$ " symbolPosition="p"
								decimalSeparator="," thousandSeparator="."
								id="txtPrecioUnitarioM2MetodologiaLSCV" maxlength="20"
								value="#{oferta.precioUnitarioM2}" disabled="true"
								styleClass="ui-inputfield-methodology-disabled-large" />
						</p:column>

						<p:column styleClass="ui-widget-header">
							<p:inputNumber symbol="$ " symbolPosition="p"
								decimalSeparator="," thousandSeparator="."
								id="txtValorM2AjustadoMetodologiaLSCV" maxlength="20"
								value="#{oferta.valorM2Ajustado}" disabled="true"
								styleClass="ui-inputfield-methodology-disabled-large" />
						</p:column>

						<p:column styleClass="ui-widget-header">
							<p:inputNumber symbol="$ " symbolPosition="p"
								decimalSeparator="," thousandSeparator="."
								id="txtValorComercialMetodologiaLSCV" maxlength="20"
								styleClass="ui-inputfield-methodology-editable-large"
								value="#{oferta.valorOferta}" />
						</p:column>
						<p:column styleClass="ui-widget-header">
							<p:commandButton icon="ui-icon-trash" title="Borrar Oferta"
								actionListener="#{comparacionMercadoLoteVentaBean.borrarOferta(oferta)}" />
						</p:column>

					</p:row>

				</ui:repeat>

				<p:row style="background-color:lightblue" id="panelSujetoLSCV">
					<p:column styleClass="ui-widget-header" colspan="4"
						style="text-align: right;">
						<h:outputText value="Sujeto:" />
					</p:column>
					<p:column styleClass="ui-widget-header">
						<p:inputNumber decimalSeparator="," thousandSeparator="."
							decimalPlaces="3" id="txtSujetoAreaLoteMetodologiaLoteVenta"
							styleClass="ui-inputfield-methodology-editable-short"
							value="#{comparacionMercadoLoteVentaBean.metodoValuacion.areaLote}">
							<p:ajax event="change"
								listener="#{informeHipotecarioBean.validarCambiosCamposSujeto(comparacionMercadoLoteVentaBean.metodoValuacion)}"
								global="false" />
						</p:inputNumber>

					</p:column>
					<p:column styleClass="ui-widget-header" colspan="7"
						style="text-align: right;">
						<h:outputText value="Promedio:" />
					</p:column>
					<p:column styleClass="ui-widget-header">
						<p:inputNumber symbol="$ " symbolPosition="p" decimalSeparator=","
							thousandSeparator="." id="txtPromedioPrecioUnitarioM2LoteVenta"
							disabled="true"
							styleClass="ui-inputfield-methodology-disabled-large"
							value="#{comparacionMercadoLoteVentaBean.metodoValuacion.promedioPrecioUnitarioM2}">
						</p:inputNumber>
					</p:column>
					<p:column styleClass="ui-widget-header">
						<p:inputNumber symbol="$ " symbolPosition="p" decimalSeparator=","
							thousandSeparator="." id="txtPromedioValorM2AjustadoLoteVenta"
							disabled="true"
							styleClass="ui-inputfield-methodology-disabled-large"
							value="#{comparacionMercadoLoteVentaBean.metodoValuacion.promedioValorM2Ajustado}" />

					</p:column>
					<p:column styleClass="ui-widget-header">
						<p:inputNumber symbol="$ " symbolPosition="p" decimalSeparator=","
							thousandSeparator="." id="txtValorComercialLoteVenta"
							disabled="true"
							styleClass="ui-inputfield-methodology-disabled-large"
							value="#{comparacionMercadoLoteVentaBean.metodoValuacion.promedioValorComercial}" />

					</p:column>
					<p:column />
				</p:row>
				<p:row id="alertaLSCV"
					rendered="#{informeHipotecarioBean.mostrarMensajeValidacionSujetoLoteVenta}">

					<p:column colspan="15">
						<p:panelGrid columns="2"
							columnClasses="ui-grid-col-1,ui-grid-col-9" layout="grid"
							styleClass="ui-panelgrid-blank"
							style=" width:100%; text-align: center;  background-color: #fcf8e3; border: 2px solid #faebcc;">
							<p:graphicImage name="images/warning-icon.png" height="70px" />
							<h:outputText style="font-size: 20px;"
								value="Tenga en cuenta que los valores del inmueble sujeto del avalúo son diferentes a los valores ingresados en el informe." />
						</p:panelGrid>
					</p:column>

				</p:row>

				<p:row>
					<p:column styleClass="ui-widget-header" colspan="4"
						style="background-color:#F2F5FA !important; text-align: center !important;">
						<b>Convenciones</b>
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="2"
						style="text-align: right;">
						<h:outputText value="Factor de superficie:" />
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="2">
						<h:selectOneMenu
							value="#{comparacionMercadoLoteVentaBean.metodoValuacion.factorSuperficie}"
							style="width:100px"
							styleClass="ui-select-item-methodology-editable">
							<f:selectItems
								value="#{comparacionMercadoLoteVentaBean.factores}"
								var="factorSuperficie" itemValue="#{factorSuperficie}"
								itemLabel="#{factorSuperficie}" />
						</h:selectOneMenu>
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="8" />

				</p:row>

				<p:row>
					<p:column styleClass="ui-widget-header" colspan="1"
						style="background-color:#F2F5FA !important;">
						<b>P:</b> Peor
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="1"
						style="background-color:#F2F5FA !important;">
						<b>S:</b> Similar
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="2"
						style="background-color:#F2F5FA !important;">
						<b>M:</b> Mejor
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="12" />
				</p:row>
				<p:row>

					<p:column styleClass="ui-widget-header" colspan="1"
						style="background-color:#F2F5FA !important;">
						<b>NP:</b> Notoriamente Peor
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="1"
						style="background-color:#F2F5FA !important;">
						<b>SP:</b> Sensiblemente Peor 
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="2"
						style="background-color:#F2F5FA !important;">
						<b>MM:</b> Mucho mejor
					</p:column>

					<p:column styleClass="ui-widget-header" colspan="12" />

				</p:row>
				<p:row>

					<p:column styleClass="ui-widget-header" colspan="1"
						style="background-color:#F2F5FA !important;">
						<b>MP:</b> Mucho peor
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="1"
						style="background-color:#F2F5FA !important;">
						<b>SM:</b> Sensiblemente mejor
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="2"
						style="background-color:#F2F5FA !important;">
						<b>NM:</b> Notoriamente mejor
					</p:column>
					<p:column styleClass="ui-widget-header" colspan="12" />

				</p:row>

			</p:panelGrid>
		</h:panelGroup>
	</p:tab>
</ui:composition>
